<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - MicroKOL</title>

    <environment include="Development">
        <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.css" />
    </environment>
    <environment exclude="Development">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
              asp-fallback-href="~/lib/bootstrap/dist/css/bootstrap.min.css"
              asp-fallback-test-class="sr-only" asp-fallback-test-property="position" asp-fallback-test-value="absolute"
              crossorigin="anonymous"
              integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" />
    </environment>




    <!--begin::Web font -->
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>



    <script>
        WebFont.load({
            google: { "families": ["Poppins:300,400,500,600,700", "Roboto:300,400,500,600,700"] },
            active: function () {
                sessionStorage.fonts = true;
            }
        });
    </script>


    <!--end::Web font -->
    <!--begin::Base Styles -->
    <!--begin::Page Vendors -->
    <link href="/assets/vendors/custom/fullcalendar/fullcalendar.bundle.css" rel="stylesheet" type="text/css">
    <!--end::Page Vendors -->
    <link href="/assets/vendors/base/vendors.bundle.css" rel="stylesheet" type="text/css">
    <link href="/assets/demo/default/base/style.bundle.css" rel="stylesheet" type="text/css">
    <!--end::Base Styles -->
    <link rel="shortcut icon" href="/assets/demo/default/media/img/logo/favicon.ico">

    <link rel="stylesheet" href="~/css/site.css" />
    <link rel="stylesheet" href="~/css/jquery.bonsai.css" />
    <link rel="stylesheet" href="~/css/lightbox.css" />



</head>
<body class="m-page--fluid m--skin- m-content--skin-light2 m-header--fixed m-header--fixed-mobile m-aside-left--enabled m-aside-left--skin-dark m-aside-left--offcanvas m-footer--push m-aside--offcanvas-default">
    <div class="m-grid m-grid--hor m-grid--root m-page">
        <!-- BEGIN: Header -->
        <header id="m_header" class="m-grid__item    m-header " m-minimize-offset="200" m-minimize-mobile-offset="200">
            <div class="m-container m-container--fluid m-container--full-height">
                <div class="m-stack m-stack--ver m-stack--desktop">
                    <!-- BEGIN: Brand -->
                    <div class="m-stack__item m-brand  m-brand--skin-dark ">
                        <div class="m-stack m-stack--ver m-stack--general">
                            <div class="m-stack__item m-stack__item--middle m-brand__logo">
                                <a href="/" class="m-brand__logo-wrapper" style="color:#ffffff;text-decoration:none;">
                                    @*<img alt="" src="/assets/demo/default/media/img/logo/logo_default_dark.png">*@
                                    <h3>MicroKOLs</h3>
                                </a>
                            </div>
                            <div class="m-stack__item m-stack__item--middle m-brand__tools">
                                <!-- BEGIN: Left Aside Minimize Toggle -->
                                <a href="javascript:;" id="m_aside_left_minimize_toggle" class="m-brand__icon m-brand__toggler m-brand__toggler--left m--visible-desktop-inline-block">
                                    <span></span>
                                </a>
                                <!-- END -->
                                <!-- BEGIN: Responsive Aside Left Menu Toggler -->
                                <a href="javascript:;" id="m_aside_left_offcanvas_toggle" class="m-brand__icon m-brand__toggler m-brand__toggler--left m--visible-tablet-and-mobile-inline-block">
                                    <span></span>
                                </a>
                                <!-- END -->
                                <!-- BEGIN: Responsive Header Menu Toggler -->
                                <a id="m_aside_header_menu_mobile_toggle" href="javascript:;" class="m-brand__icon m-brand__toggler m--visible-tablet-and-mobile-inline-block">
                                    <span></span>
                                </a>
                                <!-- END -->
                                <!-- BEGIN: Topbar Toggler -->
                                <a id="m_aside_header_topbar_mobile_toggle" href="javascript:;" class="m-brand__icon m--visible-tablet-and-mobile-inline-block">
                                    <i class="flaticon-more"></i>
                                </a>
                                <!-- BEGIN: Topbar Toggler -->
                            </div>
                        </div>
                    </div>
                    <!-- END: Brand -->
                    <div class="m-stack__item m-stack__item--fluid m-header-head" id="m_header_nav">
                        <!-- BEGIN: Horizontal Menu -->
                        <button class="m-aside-header-menu-mobile-close  m-aside-header-menu-mobile-close--skin-dark " id="m_aside_header_menu_mobile_close_btn">
                            <i class="la la-close"></i>
                        </button>
                        <div id="m_header_menu" class="m-header-menu m-aside-header-menu-mobile m-aside-header-menu-mobile--offcanvas  m-header-menu--skin-light m-header-menu--submenu-skin-light m-aside-header-menu-mobile--skin-dark m-aside-header-menu-mobile--submenu-skin-dark ">
                            @RenderSection("HorizontalMenu", required: false)
                        </div>
                        <!-- END: Horizontal Menu -->								<!-- BEGIN: Topbar -->
                        <div id="m_header_topbar" class="m-topbar  m-stack m-stack--ver m-stack--general m-stack--fluid">
                            <div class="m-stack__item m-topbar__nav-wrapper">
                                <ul class="m-topbar__nav m-nav m-nav--inline">

                                    <li class="m-nav__item m-topbar__notifications
                                        m-topbar__notifications--img m-dropdown m-dropdown--large m-dropdown--header-bg-fill m-dropdown--arrow m-dropdown--align-center m-dropdown--mobile-full-width"
                                        m-dropdown-toggle="click" m-dropdown-persistent="1" aria-expanded="true">
                                        <a href="#" class="m-nav__link m-dropdown__toggle" id="m_topbar_notification_icon">
                                            <span class="m-nav__link-badge m-badge m-badge--dot m-badge--dot-small m-badge--danger"></span>
                                            <span class="m-nav__link-icon">
                                                <i class="flaticon-music-2"></i>
                                            </span>
                                        </a>
                                        <div class="m-dropdown__wrapper" style="z-index: 101;margin-left:-630px;width:720px;" id="drop-notification">

                                        </div>
                                    </li>

                                    <li class="m-nav__item m-topbar__user-profile m-topbar__user-profile--img m-dropdown m-dropdown--medium m-dropdown--arrow m-dropdown--header-bg-fill m-dropdown--align-right m-dropdown--mobile-full-width m-dropdown--skin-light" m-dropdown-toggle="click" aria-expanded="true">
                                        <a href="#" class="m-nav__link m-dropdown__toggle">
                                            <span class="m-topbar__userpic">
                                                <img src="/assets/app/media/img/users/user4.jpg" class="m--img-rounded m--marginless m--img-centered" alt="">
                                            </span>
                                            <span class="m-topbar__username m--hide">
                                                @(User?.Identity?.Name)
                                            </span>
                                        </a>
                                        <div class="m-dropdown__wrapper" style="z-index: 101;">
                                            <span class="m-dropdown__arrow m-dropdown__arrow--right m-dropdown__arrow--adjust" style="left: auto; right: 12.5px;"></span>
                                            <div class="m-dropdown__inner">
                                                <div class="m-dropdown__header m--align-center" style="background: url(/assets/app/media/img/misc/user_profile_bg.jpg); background-size: cover;">
                                                    <div class="m-card-user m-card-user--skin-dark">
                                                        <div class="m-card-user__pic">
                                                            <img src="/assets/app/media/img/users/user4.jpg" class="m--img-rounded m--marginless" alt="">
                                                        </div>
                                                        <div class="m-card-user__details">
                                                            <span class="m-card-user__name m--font-weight-500">
                                                                @(User?.Identity?.Name)
                                                            </span>

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="m-dropdown__body">
                                                    <div class="m-dropdown__content">
                                                        <ul class="m-nav m-nav--skin-light">
                                                            <li class="m-nav__section m--hide">
                                                                <span class="m-nav__section-text">
                                                                    Section
                                                                </span>
                                                            </li>
                                                            <li class="m-nav__item">
                                                                <a href="/authen/changepassword" class="m-nav__link">
                                                                    <i class="m-nav__link-icon flaticon-share"></i>
                                                                    <span class="m-nav__link-text">
                                                                        Change Password
                                                                    </span>
                                                                </a>
                                                            </li>
                                                            <li class="m-nav__item">
                                                                <a href="/Authen/Logout" class="btn m-btn--pill btn-secondary m-btn m-btn--custom m-btn--label-brand m-btn--bolder">
                                                                    Logout
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <!-- END: Topbar -->
                    </div>
                </div>
            </div>
        </header>
        <!-- END: Header -->
        <!-- begin::Body -->
        <div class="m-grid__item m-grid__item--fluid m-grid m-grid--ver-desktop m-grid--desktop m-body">
            <!-- BEGIN: Left Aside -->
            <button class="m-aside-left-close  m-aside-left-close--skin-dark " id="m_aside_left_close_btn">
                <i class="la la-close"></i>
            </button>
            <div id="m_aside_left" class="m-grid__item	m-aside-left  m-aside-left--skin-dark ">
                <!-- BEGIN: Aside Menu -->
                <div id="m_ver_menu" class="m-aside-menu  m-aside-menu--skin-dark m-aside-menu--submenu-skin-dark " m-menu-vertical="1" m-menu-scrollable="0" m-menu-dropdown-timeout="500">
                    <ul class="m-menu__nav  m-menu__nav--dropdown-submenu-arrow ">
                        <li class="m-menu__item  m-menu__item--active" aria-haspopup="true">
                            <a href="/" class="m-menu__link ">
                                <i class="m-menu__link-icon flaticon-line-graph"></i>
                                <span class="m-menu__link-title">
                                    <span class="m-menu__link-wrap">
                                        <span class="m-menu__link-text">
                                            Dashboard
                                        </span>
                                    </span>
                                </span>
                            </a>
                        </li>


                        @await Html.PartialAsync("~/Views/Shared/_Partial/_MenuLeft.cshtml")

                    </ul>
                </div>
                <!-- END: Aside Menu -->
            </div>
            <!-- END: Left Aside -->
            <div class="m-grid__item m-grid__item--fluid m-wrapper">
                <!-- BEGIN: Subheader -->
                <div class="m-subheader ">
                    <div class="d-flex align-items-center">
                        <div class="mr-auto">
                            @RenderSection("Subheaders", required: false)
                        </div>
                        @RenderSection("Subheaders2", required: false)
                    </div>
                    <div class="align-items-center mt-3">
                        <div class="mr-auto">
                            @if (TempData["MessageSuccess"] != null)
                            {
                                <div class="alert alert-success" role="alert">
                                    <strong>
                                        Thống báo!
                                    </strong>
                                    @TempData["MessageSuccess"]
                                </div>
                            }

                            @if (TempData["MessageError"] != null)
                            {
                                <div class="alert alert-danger" role="alert">
                                    <strong>
                                        Thống báo!
                                    </strong>
                                    @TempData["MessageError"]
                                </div>
                            }

                            @if (TempData["MessageInfo"] != null)
                            {
                                <div class="alert alert-info" role="alert">
                                    <strong>
                                        Thống báo!
                                    </strong>
                                    @TempData["MessageInfo"]
                                </div>
                            }


                        </div>
                    </div>
                </div>
                <!-- END: Subheader -->
                <div class="m-content" style="padding-top:5px;">
                    @RenderBody()
                </div>
            </div>
        </div>
        <!-- end:: Body -->
        <!-- begin::Footer -->
        <footer class="m-grid__item	m-footer ">
            <div class="m-container m-container--fluid m-container--full-height m-page__container">
                <div class="m-stack m-stack--flex-tablet-and-mobile m-stack--ver m-stack--desktop">
                    <div class="m-stack__item m-stack__item--left m-stack__item--middle m-stack__item--last">
                        <span class="m-footer__copyright">
                            2019 © MicroKOLs
                        </span>
                    </div>

                </div>
            </div>
        </footer>
        <!-- end::Footer -->
    </div>
    <div id="m_scroll_top" class="m-scroll-top">
        <i class="la la-arrow-up"></i>
    </div>
    <environment include="Development">
        <script src="~/lib/jquery/dist/jquery.js"></script>
        <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.js"></script>
    </environment>
    <environment exclude="Development">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"
                asp-fallback-src="~/lib/jquery/dist/jquery.min.js"
                asp-fallback-test="window.jQuery"
                crossorigin="anonymous"
                integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=">
        </script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"
                asp-fallback-src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"
                asp-fallback-test="window.jQuery && window.jQuery.fn && window.jQuery.fn.modal"
                crossorigin="anonymous"
                integrity="sha384-xrRywqdh3PHs8keKZN+8zzc5TX0GRTLCcmivcbNJWm2rs5C8PRhcEn3czEjhAO9o">
        </script>
    </environment>
    <script src="/js/site.js" asp-append-version="true"></script>
    <script src="/assets/vendors/base/vendors.bundle.js" type="text/javascript"></script>
    <script src="/assets/demo/default/base/scripts.bundle.js" type="text/javascript"></script>
    <script src="/assets/vendors/custom/fullcalendar/fullcalendar.bundle.js" type="text/javascript"></script>
    <script src="/assets/app/js/dashboard.js" type="text/javascript"></script>
    <script src="/assets/demo/default/custom/components/base/sweetalert2.js" type="text/javascript"></script>
    <script src="/assets/demo/default/custom/crud/forms/widgets/bootstrap-datepicker.js" type="text/javascript"></script>
    <script src="/assets/vendors/scrollbar/jquery.mCustomScrollbar.concat.min.js" type="text/javascript"></script>
    <script src="~/js/jquery.qubit.js" type="text/javascript"></script>
    <script src="~/js/jquery.bonsai.js" type="text/javascript"></script>
    <script src="~/js/lightbox.js" type="text/javascript"></script>





    @RenderSection("Scripts", required: false)

    <script type="text/javascript">


        function load_drop_notification() {
              $.ajax({
                    type: "GET",
                    url: '@Url.Action("AjaxDropNotification", "Notification")',
                    //data: data,
                    success: function (data) {

                        $('#drop-notification').html(data);



                    },
                    dataType: "html",
                    traditional: true
                });
        }

        function load_count_new_notification() {
            $.ajax({
                    type: "GET",
                    url: '@Url.Action("CountNewNotification", "Notification")',
                    //data: data,
                    success: function (data) {
                        if (data.campaignTotal > 0) {
                            $('#campaign-count-menu').show();
                            $('#campaign-count-menu').html(data.campaignTotal);
                        }
                        else {
                            $('#campaign-count-menu').hide();
                        }

                        if (data.walletDepositeTotal > 0) {
                            $('#walletdeposit-count-menu').show();
                            $('#walletdeposit-count-menu').html(data.walletDepositeTotal);
                        }
                        else {
                            $('#walletdeposit-count-menu').hide();
                        }

                        if (data.agencyWalletWithDrawTotal > 0) {
                            $('#walletwitdraw-count-menu').show();
                            $('#walletwitdraw-count-menu').html(data.agencyWalletWithDrawTotal);
                        }
                        else {
                            $('#walletwitdraw-count-menu').hide();
                        }

                        if (data.accountTotal > 0) {
                            $('#account-count-menu').show();
                            $('#account-count-menu').html(data.accountTotal);
                        }
                        else {
                            $('#account-count-menu').hide();
                        }

                        if (data.campaignServiceCashBackTotal > 0) {
                            $('#campaign-service-cashback').show();
                            $('#campaign-service-cashback').html(data.campaignServiceCashBackTotal);
                        }
                        else {
                            $('#campaign-service-cashback').hide();
                        }




                    },
                    dataType: "json",
                    traditional: true
                });
        }



        $(document).ready(function () {

            //################### intervel load notification ################################




            $('#walletdeposit-count-menu').hide();
            $('#campaign-count-menu').hide();
            $('#account-count-menu').hide();
            $('#campaign-service-cashback').hide();

            // #drop-notification
            load_drop_notification();
            setInterval(function () {
                load_drop_notification();
            }, 120000);


            //load count notification leftmenu
            load_count_new_notification();
            setInterval(function () {
                load_count_new_notification();

            }, 60000);




            //###############################################################################


        });


    </script>


</body>
</html>
