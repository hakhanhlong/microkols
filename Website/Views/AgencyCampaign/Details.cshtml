@model CampaignDetailsViewModel

@{
    ViewData["Title"] = Model.Title;
    var categories = (List<CategoryViewModel>)ViewBag.Categories;
    var cities = (List<EntityViewModel>)ViewBag.Cities;

}
<h1 class="mt-0 h4">@Model.Title</h1>

<div class="row">
    <div class="col-md-6">

        @if (Model.DateStart.HasValue)
        {
            <p>
                Thời gian: @Model.DateStart.Value.ToViDate()  -  @Model.DateEnd.Value.ToViDate()
            </p>
        }
        <p>
            Trạng thái:  @Model.Status.ToBadge()
        </p>
        <p>
            Loại chiến dịch: <strong> @Model.Type.ToDisplayName()</strong>
        </p>
        <p>
            Mô tả:  @Model.Description
        </p>


    </div>
    <div class="col-md-6">

        <p>Tổng chi phí: <span class="text-danger">@Model.Payment.TotalChargeAmount.ToPriceText()</span> </p>
        <p>Đã thanh toán: <span class="text-success">@Model.Payment.TotalPaidAmount.ToPriceText()</span> </p>
        <h6>Tiêu chí</h6>
        <ul>
            @if (Model.Gender.HasValue)
            {
                <li>Giới tính: @Model.Gender.Value.ToDisplayName()</li>
            }
            @if (Model.CityId.HasValue)
            {
                var city = cities.FirstOrDefault(m => m.Id == Model.CityId.Value);
                if (city != null)
                {
                    <li>Khu vực: <strong>@city.Name</strong></li>
                }
            }
            @if (Model.AgeStart.HasValue)
            {
                <li>Độ tuổi: <strong>@Model.AgeStart</strong> - <strong>@Model.AgeEnd</strong></li>
            }

            @if (Model.CategoryIds.Count > 0)
            {
                var cats = categories.Where(m => Model.CategoryIds.Contains(m.Id));

                <li>
                    Lĩnh vực quan tâm/thế mạnh:
                    @foreach (var cat in cats)
                    {
                        <strong>@cat.Name</strong>
                    }
                </li>
            }

        </ul>
    </div>
</div>

@if (Model.Payment.IsValidServiceCharge)
{
    <div class="alert alert-warning" role="alert">
        <h4 class="alert-heading">Thông báo</h4>
        <p>
            Bạn chưa thanh toán phí dịch vụ. Vui lòng thanh toán phí dịch vụ để tiếp tục
        </p>
        <hr>
        <p class="mb-0">
            <btnpayment campaign-id="Model.Id"></btnpayment>
        </p>
    </div>
    
}

<ul class="nav  nav-tabs">

    <li class="nav-item">
        <a class="nav-link active">Tổng hợp chi phí</a>
    </li>
    <li class="nav-item">
        <a class="nav-link">Thành viên tham gia</a>
    </li>
    <li class="nav-item">
        <a class="nav-link">Thành viên phù hợp</a>
    </li>

</ul>

<div class="tab-content mt-3">
    <div class="tab-pane fade show active">

        <table>
            <tr>
                <th>Thông tin</th>

                <th>Chi phí</th>
            </tr>
            <tr></tr>
        </table>
    </div>

</div>