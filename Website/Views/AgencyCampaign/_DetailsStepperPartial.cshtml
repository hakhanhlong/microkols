@model CampaignDetailsViewModel

@{
    var steps = new List<string>() { "Thanh toán phí dịch vụ", "Thành viên tham gia", "Bắt đầu chiến dịch", "Kết thúc chiến dịch", "Hoàn thành chiến dịch" };

    var activestepIdx = 0;
    if (Model.Status == CampaignStatus.WaitToConfirm)
    {
        if (Model.Payment.IsValidServiceCharge)
        {
            activestepIdx = 0;
        }
        else
        {
            activestepIdx = 1;
        }
    }
    else if (Model.Status == CampaignStatus.Started)
    {
        activestepIdx = 2;
    }
    else if (Model.Status == CampaignStatus.Ended || Model.Status == CampaignStatus.Error)
    {
        activestepIdx = 3;
    }
    else if (Model.Status == CampaignStatus.Completed)
    {
        activestepIdx = 4;
    }
    <ul class="stepper stepper-vertical m-0 p-0">

        @for (var i = 0; i < steps.Count; i++)
        {
            var stepCssClass = i < activestepIdx ? "completed" : i == activestepIdx ? "active" : "";
            <li class="@stepCssClass">
                <a href="javascript:;">
                    <span class="circle">@(i + 1)</span>
                    <span class="label">@steps[i]</span>
                </a>
                @if (i == activestepIdx)
                {
                    var stepPartial = $"_DetailsStepperStep{activestepIdx}Partial";
                    <div class="step-content">
                        <partial name="@stepPartial" model="Model" />
                    </div>
                }
            </li>

        }
    </ul>
}